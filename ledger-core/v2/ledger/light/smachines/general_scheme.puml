@startuml

title "General machines interaction for Object operations"

entity "Message Handle Machine" as m
entity "Object Machine" as o
entity "Drop Batch Machine" as d
database "Global Storage" as db

m -> o : Get or create machine.
o -> o : Fetch Lifeline Index.
o --> m : Sanity check error (optional).
o -> d : Get or create machine.
o -> d : Send new state.
d -> d : Wait batch, hash calculations,\nreplication etc.
d -> db : Update record number.
d -> o : Return result.
o -> m : Return result.

@enduml
